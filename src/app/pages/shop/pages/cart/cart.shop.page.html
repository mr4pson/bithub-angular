<div class="cart-page">
  <div class="cart-cols">
    <div class="cart-main">
      <h1>{{words["shop"]?.["cart"]?.[lang.slug]}}</h1>
      <div *ngIf="items.length === 0" class="cart-empty">
        {{words["shop"]?.["cart-empty"]?.[lang.slug]}}
      </div>
      <div *ngFor="let item of items; let i = index" class="cart-item">
        <img
          *ngIf="item.img"
          class="cart-item-img"
          [src]="'/images/shopitems/' + item.img"
          [alt]="item.product.name[lang.slug]"
        />
        <div class="cart-item-info">
          <div class="cart-item-title">{{item.product.name[lang.slug]}}</div>
          <div class="cart-item-qty">
            <label>{{words["shop"]?.["quantity"]?.[lang.slug]}}:</label>
            <!-- <input
              type="number"
              [min]="item.product.min_items_num > 0 ? item.product.min_items_num : 1"
              [(ngModel)]="item.quantity"
              (change)="onAmountChange(item, i)"
            /> -->
            <app-quantity-selector
              [quantity]="item.quantity"
              [step]="item.product.priceStep ? item.product.priceStep : 1"
              (change)="handleQuantityChange($event, item)"
            />
          </div>
        </div>
        <div class="cart-item-price">
          ${{getShopItemPrice(item) * item.quantity}}
        </div>
        <button
          class="cart-item-remove btn gold"
          (click)="removeItem(i)"
          title="Удалить"
        >
          ✕
        </button>
      </div>
    </div>
    <div class="cart-summary">
      <div class="cart-summary-title">
        {{words["shop"]?.["products"]?.[lang.slug]}}, {{items.length}}
        {{words["shop"]?.["pcs"]?.[lang.slug]}}. ${{total}}
      </div>
      <div class="cart-summary-total">
        <b>{{words["shop"]?.["total"]?.[lang.slug]}}: ${{total}}</b>
      </div>
      <button class="btn gold" (click)="order()" [disabled]="!total || sending">
        {{words["shop"]?.["order"]?.[lang.slug]}}
      </button>
    </div>
  </div>
</div>
<popup-shoporder
  *ngIf="user"
  [cartItems]="items"
  [(active)]="shoporderPopupActive"
/>
