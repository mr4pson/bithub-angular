<header>
  <div class="h-left">
    <div class="hl-mmbtn" (click)="onTogglePanel('Mob', $event)">
      <span></span>
    </div>
    <div class="hl-logo">
      <a routerLink="/{{ lang.slug }}"
        ><img src="/assets/images/logo.svg" alt="logo"
      /></a>
    </div>
    <div class="hl-lang">
      <span
        class="hll-btn"
        [class.active]="panelLangsActive"
        (click)="onTogglePanel('Langs', $event)"
        >{{ lang.slug }}</span
      >
      <panel-langs [(active)]="panelLangsActive"></panel-langs>
    </div>
    <div class="hl-links">
      <a target="_blank" [href]="words['contacts']?.['yt']?.[lang.slug]"
        ><img src="/assets/images/yt_opaque.svg"
      /></a>
      <a target="_blank" [href]="words['contacts']?.['tg']?.[lang.slug]"
        ><img src="/assets/images/tg_opaque.svg"
      /></a>
      <a
        target="_blank"
        class="tw hl-link"
        [href]="words['contacts']?.['tw']?.[lang.slug]"
      ></a>
      <a
        class="mail"
        href="mailto:{{words['contacts']?.['mail']?.[lang.slug]}}"
      ></a>
    </div>
  </div>
  <div class="h-right">
    <ng-container *ngIf="!authenticated">
      <button
        type="button"
        class="hr-btn btn gold"
        (click)="popupLoginActive = true"
      >
        <span class="btn-icon login"></span
        ><span
          class="btn-text"
          >{{words["login"]?.["title"]?.[lang.slug]}}</span
        >
      </button>
    </ng-container>
    <ng-container *ngIf="user">
      <div class="hr-dash">
        <div class="hrd-btnwrap">
          <div
            class="hrd-btn hrd-favorites"
            style="width: 25px; margin-top: 5px"
            (click)="handleSubscriptionToggle()"
          >
            <svg width="0" height="0">
              <defs>
                <!-- Градиент для фильтра -->
                <linearGradient id="gradient" x1="0%" y1="0%" x2="100%" y2="0%">
                  <stop offset="0%" stop-color="var(--color-hilite1)" />
                  <stop offset="50%" stop-color="var(--color-hilite3)" />
                  <stop offset="100%" stop-color="var(--color-hilite1)" />
                </linearGradient>

                <!-- Фильтр для применения градиента к обводке -->
                <filter id="gradient-filter" x="0" y="0" width="1" height="1">
                  <feFlood flood-color="#4f46e5" result="color1" />
                  <feFlood flood-color="#ec4899" result="color2" />
                  <feBlend
                    mode="lighten"
                    in="color1"
                    in2="color2"
                    result="blended"
                  />
                  <feComposite in="blended" in2="SourceGraphic" operator="in" />
                </filter>
              </defs>
            </svg>

            <svg
              class="gradient-icon"
              viewBox="-2 -2 28 28"
              xmlns="http://www.w3.org/2000/svg"
            >
              <path
                d="M4.54845 16.9968C3.80845 17.2268 3.08837 17.6567 2.46837 18.2667C1.84837 18.8867 1.42835 19.6068 1.19835 20.3468C0.968354 21.0868 0.938388 21.8467 1.10839 22.5367C1.79839 22.7067 2.55845 22.6768 3.29845 22.4468C4.03845 22.2168 4.75841 21.7868 5.37841 21.1768C5.99841 20.5568 6.41843 19.8368 6.64843 19.0968"
                stroke="url(#gradient)"
                stroke-miterlimit="10"
                stroke-linecap="round"
                stroke-linejoin="round"
              ></path>
              <path
                d="M4.63855 10.5167L1.80859 13.3468H4.63855C7.17855 14.2968 9.11858 16.1068 10.2986 19.0068V21.8368L13.1285 19.0068L11.7185 14.7667C15.1385 14.5267 18.0685 13.3067 20.2085 10.5267C22.2285 7.72671 22.8785 4.64677 22.3285 1.33677C18.8185 0.526768 15.7285 1.15676 13.1385 3.45676C10.6285 6.08676 9.20856 8.91675 8.89856 11.9468L4.63855 10.5167Z"
                stroke="url(#gradient)"
                stroke-miterlimit="10"
                stroke-linecap="round"
                stroke-linejoin="round"
              ></path>
              <path
                d="M17.3684 8.27673C18.473 8.27673 19.3684 7.3813 19.3684 6.27673C19.3684 5.17216 18.473 4.27673 17.3684 4.27673C16.2638 4.27673 15.3684 5.17216 15.3684 6.27673C15.3684 7.3813 16.2638 8.27673 17.3684 8.27673Z"
                stroke="url(#gradient)"
                stroke-miterlimit="10"
                stroke-linecap="round"
                stroke-linejoin="round"
              ></path>
            </svg>
          </div>
        </div>
        <div class="hrd-btnwrap">
          <div
            class="hrd-btn hrd-favorites"
            [class.active]="panelFavoritesActive"
            (click)="onTogglePanel('Favorites', $event)"
          >
            <span></span>
          </div>
          <panel-favorites [(active)]="panelFavoritesActive"></panel-favorites>
        </div>
        <div class="hrd-btnwrap">
          <btn-unviewed
            [active]="panelUnviewedActive"
            (click)="onTogglePanel('Unviewed', $event)"
          ></btn-unviewed>
          <panel-unviewed [(active)]="panelUnviewedActive"></panel-unviewed>
        </div>
        <div class="hrd-btnwrap">
          <div
            class="hrd-btn hrd-cart"
            [class.active]="panelCartActive"
            (click)="onTogglePanel('Cart', $event)"
          >
            <span></span>
          </div>
          <panel-cart [(active)]="panelCartActive"></panel-cart>
        </div>
        <div class="hrd-money" *ngIf="!user.parent_id">
          <div
            class="hrd-amount"
            [class.active]="panelInorderActive"
            (click)="onTogglePanel('Inorder', $event)"
          >
            <span>${{ user.money | number : "1.2-2" }}</span>
          </div>
          <panel-inorder [(active)]="panelInorderActive"></panel-inorder>
        </div>
      </div>
      <div class="hr-ava" [class.active]="panelAccountActive">
        <div class="hra-img" (click)="onTogglePanel('Account', $event)">
          <img *ngIf="user.img" src="/images/users/{{ user.img }}" />
          <span *ngIf="!user.img">{{user.name?.[0]}}</span>
        </div>
        <panel-account [(active)]="panelAccountActive"></panel-account>
      </div>
    </ng-container>
  </div>
  <div class="h-center">
    <nav><menu-main></menu-main></nav>
    <div class="hc-logo" *ngIf="!authenticated">
      <a routerLink="/{{ lang.slug }}"
        ><img src="/assets/images/logo.svg" alt="logo"
      /></a>
    </div>
  </div>
</header>

<panel-mob [(active)]="panelMobActive"></panel-mob>
