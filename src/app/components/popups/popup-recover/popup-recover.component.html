<div class="popup-wrap" [class.active]="active">
    <div class="popup" id="popup-{{unique}}">
        <div class="popup-head">
            <div class="popup-headtitle">{{words['recover']?.['title']?.[lang.slug]}}</div>
            <div class="popup-close" (click)="onClose()"><span></span></div>
        </div>
        <div class="popup-main">
            <div class="popup-title">{{words['recover']?.['title']?.[lang.slug]}}</div>
            <div class="popup-content"> 
                <form class="gf" (submit)="onSubmit()">
                    <ng-container *ngIf="!passwordChanged">
                        <div class="gf-row">
                            <div class="gf-title">{{words['recover']?.['email']?.[lang.slug]}}</div>
                            <div class="gf-inputwrap"><input type="email" name="email" [(ngModel)]="email" [class.error]="errors['email']"></div>
                            <div class="gf-error" *ngIf="errors['email']">{{words['errors']?.[errors['email']]?.[lang.slug]}}</div>
                        </div>
                        <div class="gf-row">
                            <div class="gf-title">{{words['recover']?.['code']?.[lang.slug]}}</div>
                            <div class="gf-2cols adaptive">
                                <div class="gf-col">
                                    <div class="gf-inputwrap"><input-password [(value)]="code" [error]="errors['code']"></input-password></div>
                                    <div class="gf-error" *ngIf="errors['code']">{{words['errors']?.[errors['code']]?.[lang.slug]}}</div>
                                </div>
                                <div class="gf-col">
                                    <div class="gf-btnwrap">
                                        <button type="button" tabindex="-1" class="btn gold" [class.busy]="codeSending" [class.done]="codeSent" (click)="onSendCode()">
                                            <span class="btn-icon code"></span>
                                            <span class="btn-text">{{words["recover"]?.["get-code"]?.[lang.slug]}}</span>
                                            <span class="btn-done"><span>{{words["recover"]?.["code-sent"]?.[lang.slug]}}</span></span>
                                        </button>
                                    </div>
                                </div>                            
                            </div>
                        </div>
                        <div class="gf-row">
                            <div class="gf-title">{{words['recover']?.['password']?.[lang.slug]}}</div>
                            <div class="gf-inputwrap"><input-password [(value)]="password" [error]="errors['password']"></input-password></div>
                            <div class="gf-error" *ngIf="errors['password']">{{words['errors']?.[errors['password']]?.[lang.slug]}}</div>
                        </div>
                        <div class="gf-row">
                            <div class="gf-title">{{words['recover']?.['password2']?.[lang.slug]}}</div>
                            <div class="gf-inputwrap"><input-password [(value)]="password2" [error]="errors['password2']"></input-password></div>
                            <div class="gf-error" *ngIf="errors['password2']">{{words['errors']?.[errors['password2']]?.[lang.slug]}}</div>
                        </div>
                        <div class="gf-row">
                            <div class="gf-btnwrap"><button type="submit" class="btn gold" [class.busy]="formSending"><span class="btn-icon save"></span><span class="btn-text">{{words["recover"]?.["submit"]?.[lang.slug]}}</span></button></div>
                        </div>
                        <div class="gf-row">
                            <div class="gf-linkwrap"><span>{{words['recover']?.['remembered']?.[lang.slug]}}</span>&nbsp;<a (click)="onLogin()">{{words['register']?.['login']?.[lang.slug]}}</a></div>
                        </div>
                    </ng-container>
                    <ng-container *ngIf="passwordChanged">
                        <div class="gf-row">
                            <div class="gf-linkwrap"><span>{{words['recover']?.['password-changed']?.[lang.slug]}}</span>&nbsp;<a (click)="onLogin()">{{words['recover']?.['login']?.[lang.slug]}}</a></div>
                        </div>  
                    </ng-container>                    
                </form>                               
            </div>            
        </div>        
    </div>
</div>
